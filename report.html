<html>
<!DOCTYPE html>

<head>
<title>Report</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/style.css">

<meta charset="utf-8">
<style>
  text {
  font-family: Arial, sans-serif;
  font-size: 8px;
  }
</style>

<script type="text/javascript" src="static/scripts/jquery.min.js"></script>
<script>
$(document).ready(function(){{
   $("#tabmenu").load("/getHeader?page=report")
}});
</script>
</head>

<body>
<div class="tab" id="tabmenu"></div>

<div id="hourly" class="border">
<legend> Cluster and User Usage Report </legend>
  <form action="./clusterReport_hourly"> 
        Cluster <select id='cluster' name='cluster'> 
                   <option value='slurm'>Slurm</option>
                   <option value='slurm_cluster'>Slurm Cluster</option></select>
        Hourly Usage from <input name="start" id="start" value="2017-09-18" type="date"> to <input name="stop" id="stop" value="" type="date"> &nbsp
        <button> Report </button></form>
  <form action="./accountReport_hourly"> 
        Slurm Account Allocation Hourly Usage from <input name="start" id="start" value="2017-09-25" type="date"> to <input name="stop" id="stop" value="" type="date">
        <button> Report </button></form>
  <form action="./userReport_hourly"> 
        Top <input name="top" id="top" size=2 value=5> 
        Slurm Users Usage of <select id='acct' name='acct'>
                                <option value="all">All</option>
                                <option value="cca">CCA</option>
                                <option value="ccb">CCB</option>
                                <option value="ccm">CCM</option>
                                <option value="ccn">CCN</option>
                                <option value="ccq">CCQ</option>
                                <option value="scc">SCC</option>
                             </select> Account from <input name="start" id="start" value="2017-10-05" type="date"> to <input name="stop" id="stop" value="" type="date">
        <button> Report </button></form>
</div>

<div id="daily" class="border">
<legend> File Usage Daily Report </legend>
<form action="./fileReport_daily"> 
        Top <input name="top" id="top" size=2 value=5> Users 
        File Count and Bytes Daily Usage on 
        <select name="fs">
          <option value="home">      Home</option>
          <option value="ceph_users">Ceph Users</option>
          <option value="ceph_full"> Ceph Full</option>
          <option value="xfs1">      Xfs1</option>
        </select>
        from <input name="start" id="start" value="2016-10-25" type="date"> to <input name="stop" id="stop" value="" type="date">
        <button> Report </button></form>
</div>

<div id="secondly" class="border">
<legend> Pending Queue Report </legend>
  <form action="./queueLengthReport"> 
        Slurm Cluster Queue Length from <input name="start" id="start" value="2017-09-18" type="date"> to <input name="stop" id="stop" value="" type="date"> with job wait time bigger than <input name="queueTime" id="queueTime" size=2 value=1> seconds &nbsp
        <button> Report </button></form>
</div>

<div id="CDF" class="border">
<legend> CDF Report </legend>
    <form action="./cdfReport"> 
        CDF (up to <input name="upper" id="upper" size=3 value=90>th percentile)
        of request/allocated CPUs/Nodes of ALLOCATED jobs 
        from <input name="start" id="start" value="2017-10-05" type="date"> to <input name="stop" id="stop" value="" type="date">
        <button> Report </button></form>
    <form action="./cdfTimeReport"> 
        CDF (up to <input name="upper" id="upper" size=3 value=90>th percentile)
        of the execution time of RUNNING jobs with execution time longer than 5 seconds
        from <input name="start" id="start" value="2017-10-05" type="date"> to <input name="stop" id="stop" value="" type="date">
        <button> Report </button></form>
</div>
<div id="history" class="border">
<legend> History</legend>
    <form action="./jobGraph"> 
        Job <input name="jobid" id="jobid" size=10> <button> History</button></form>
    <form action="./nodeGraph_1"> 
        Node <input name="node" id="node" size=10>'s resource usage from <input name="start" id="start" type="date"> to <input name="stop" id="stop" value="" type="date"> <button> History</button></form>
</div>
<script>
  yesterday = new Date() 
  yesterday.setDate(yesterday.getDate()-1)
  $("input[name='stop'").val(yesterday.toISOString().split('T')[0])

  startDate = new Date() 
  startDate.setMonth(startDate.getMonth()-3)
  $("input[name='start'").val(startDate.toISOString().split('T')[0])
</script>
</body>
</html>
